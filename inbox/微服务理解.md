# 单体应用
## 特点
![](https://pic.imgdb.cn/item/66840087d9c307b7e948c1cc.png)

- 所有功能模块都在一个位置
- 不便于team work
  - 所有人都必须使用同一技术栈
  - 开发时要要注意不要影响到其他模块的代码
- 不便于部署。改了一个地方就必须重新编译整个。
## 挑战
![](https://pic.imgdb.cn/item/668401c7d9c307b7e94b8c7d.png)
![](https://pic.imgdb.cn/item/66840216d9c307b7e94c36d7.png)

# 什么是微服务？
微服务就是将单体应用拆分成多个部分，各个部分单独提供相应的服务，**划分出来的各个部分就叫做“微服务”**。

问题：
- 如何拆分？
- 各个部分放哪些代码？
- 要拆分成多次部分？
- 每个部分有多大？
- 各个部分如何通信？

最佳实践：
- 基于功能划分。例如商城系统就划分为用户中心、购物车、商品、支付等等。
- 一个微服务只完成一个具体的事务。
- 各个微服务独立，自我维护，即**松耦合**。
  - 意味着单独部署
  - 各个微服务都有自己的依赖环境

# 微服务之间如何通信
- 通过API调用。每个微服务都有自己的api,相互**同步调用**，等待结果。
![](https://pic.imgdb.cn/item/66840b6bd9c307b7e960597e.png)
- 通过message broker。发布者消费模型实现异步调用。
![](https://pic.imgdb.cn/item/66840c40d9c307b7e9621913.png)
- 使用k8s的service mesh



# 微服务框架做了什么？

# 参考
- [Youtube- Microservices explained - the What, Why and How?](https://www.youtube.com/watch?v=rv4LlmLmVWk)