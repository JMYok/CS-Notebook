# InnoDB存储引擎
## 一行记录的存储格式
### **数据表的数据存放在哪？**
InnoDB产生的文件有：
- .frm文件：存储表的结构信息（有哪些字段、字段数据类型、字段约束条件、字符集等等）
- .ibd文件：存储表的数据信息
### **InnoDB表空间结构由哪些组成？**
段、区、页、行
![](https://pic.imgdb.cn/item/668a931dd9c307b7e95aeb7c.png)
### **varchar怎么保存长度的？**
在Compact格式中，可通过变长字段长度列表得知变长字段实际占用的数据大小。

**varchar中的n最大取多大呢？**

varchar(n)中的n的单位为字符，最大取值2^16-1=65535字节，但是实际计算的时候还需要把【变长字段长度列表】、【NULL值列表】的长度计算进去。
![](https://pic.imgdb.cn/item/668a93a0d9c307b7e95baa1a.png)
以下为字符集为ASCAII字符集，也就是一个字符占一个字节的情况：
![](https://pic.imgdb.cn/item/668a93d5d9c307b7e95bfa21.png)
其中，变长字段n<=255时，变长字段长度列表为1字节；变长字段n>255时，变长字段长度列表为2字节。
若字段中有NULL值，则NULL值列表为1字节。

### **Null值是如何保存的？**
若所有记录中存在一个NULL值，则存在NULL值列表，其中**按照逆序排列**各个字段是否存在空值，0是不存在空值，1是存在空值。
![](https://pic.imgdb.cn/item/668a9416d9c307b7e95c581e.png)
以上的NULL值列表表示为0x04。